services:
  open-next-router:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "3000:3000"
    volumes:
      # Mount your runtime config (create it from open-next-router.example.yaml).
      - ./open-next-router.yaml:/etc/open-next-router/open-next-router.yaml:ro
      # Providers directory (DSL *.conf)
      - ./providers:/etc/open-next-router/providers:ro
      # Upstream keys
      - ./keys.yaml:/etc/open-next-router/keys.yaml:ro
      # Model routing
      - ./models.yaml:/etc/open-next-router/models.yaml:ro
    environment:
      - ONR_PROVIDERS_DIR=/etc/open-next-router/providers
      - ONR_KEYS_FILE=/etc/open-next-router/keys.yaml
      - ONR_MODELS_FILE=/etc/open-next-router/models.yaml
      # Optional overrides:
      # - ONR_API_KEY=change-me
      # - ONR_READ_TIMEOUT_MS=60000
      # - ONR_WRITE_TIMEOUT_MS=60000
    restart: unless-stopped
