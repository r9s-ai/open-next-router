services:
  open-next-router:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "3000:3000"
    volumes:
      # Mount your runtime config (create it from config/onr.example.yaml).
      - ./onr.yaml:/etc/onr/onr.yaml:ro
      # Providers directory (DSL *.conf)
      - ./config/providers:/etc/onr/providers:ro
      # Upstream keys
      - ./keys.yaml:/etc/onr/keys.yaml:ro
      # Model routing
      - ./models.yaml:/etc/onr/models.yaml:ro
    environment:
      - ONR_PROVIDERS_DIR=/etc/onr/providers
      - ONR_KEYS_FILE=/etc/onr/keys.yaml
      - ONR_MODELS_FILE=/etc/onr/models.yaml
      # Optional overrides:
      # - ONR_API_KEY=change-me
      # - ONR_READ_TIMEOUT_MS=60000
      # - ONR_WRITE_TIMEOUT_MS=60000
    restart: unless-stopped
